<html>
<head>
    <style type="text/css">
        body { font-family: courier, courier new, monospace; font-size:12px; margin-left: 42px; width: 465px; white-space: pre-line; }
        h2 { margin: 10px 0 0 -22px; font-size:12px; padding: 0 !important }
        table { font-size: 10px; margin-left: -22px; width: 450px; }
        div.header { padding: 0; margin: 0 0 0 -22px; white-space: pre-wrap; }
    </style>
</head>
<body>

<div class="header">
ATLAS Service Template Specification
Name                                                   field_data
Version                                                     0.3.6
Author(s)                            M. Caballero (AgriCircle AG)
</div>

<h2>The "field_data" ATLAS Service Template</h2>
<div style="margin-left: -22px;">
Abstract

This document describes the specifications for field_data services whose purpose is to store and make accessible a number of shareworthy intrinsic attributes and properties of a farmer's fields to authorized ATLAS network consumers.
</div>
<h2>1 Introduction</h2>

Field data is information that is relevant to a large number of services and platforms in the ATLAS network. Services implementing the field_data service template provide a reference storage (source of truth) from which other services and platforms may retrieve data or synchronize their data with.

The field_data service template is designed with the idea that a single service instance is configured in all the services used by a farmer that require field information. Having a common field_data service for all farmer's services means that field information MAY be exchanged via a "field reference" (URI) rather than with the actual data and that shareable information can be managed at a single location and be available for all consumers.

<h2>2 Terminology</h2>

The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119 and indicate requirement levels for compliant implementations.

The notation "[xxx]" (xxx in square brackets) is equivalent to "array of xxx".

When used alone, the term "field_data" refers to "field_data service template". Instead, "field_data service" is equivalent to "a service implementing the field_data service template".

<h2>3 Pre-requisites</h2>

A thorough understanding in the following is required for both service consumers or service implementors:
<pre>
    - GeoJSON specifications (<a href="https://geojson.org/">https://geojson.org/</a>)
    - GeoPackage specifications (<a href="https://www.geopackage.org/">https://www.geopackage.org/</a>)
</pre>
<h2>4 field_data Use Scenarios</h2>

The following sections describe some aspects of the use of field_data.  The examples were chosen to illustrate the basic operation of applications using field_data, not to limit what field_data may be used for.

<h2>4.1 Field Synchronisation</h2>

Farmers typically use several software platforms. It is often the case that a few of these platforms require information of field boundaries for their operations.

In ATLAS, field_data services provide a single source of truth for field information but most existing software require a local copy of the data.

The field_data subscriptions enable the establishment of a simple data mirroring mechanism so that all participating farmer's systems may update their local mirror as soon as changes occur in a field_data service.

<h2>4.2 Soil Fertilisation</h2>

As a fertilisation operation is performed on a field, the actual amounts of nutrients that have been applied (retrieved from the equipment) are updated on the field_data service.

When another soil fertilisation operation is planned at a later time, a field_data service may be queried for nutrients applied from prior operations in order to adjust the new prescription.

<h2>5 Service Template API Overview</h2>

This section provides a very high-level summary of the field_data functions:
<pre>
Basic Endpoints
    List Fields
    Get Field Information
    List Groups
Crop Information
    Get Crop History
    Get Crop Details
Driving Path
    Get Driving Path
Applications Results Endpoints
    Get Application Result
    Add Application Result
Subscription Management Endpoints
    Subscribe
    Refresh a Subscription
    Unsubscribe
</pre>
Note that there are no operations to update, create, delete fields. These operations are deliberately excluded from the field_data template.

Implementations of field_data are responsible for providing end-user configuration and management tools in their proprietary user interface, such as import from a shapefile, boundary editing in the browser, ... Any change generated by these tools must generate an appropriate notification to subscribers (see 5.5 Subscription Management Functions).

Fields SHALL NOT be deleted under any condition (by the implementation's management application) so that references held to this field by external consumers remain valid over time. When a field is no longer relevant for new operations, it's archived property will be set to "true". Important note: an archived field can never be modified, including changing its archived state.

Within this section, operations are summarised with simple tables:
<pre>
+--------------------------------------------+
| logical operation name                     |
+-------------+------------------------------+
|      Inputs | &lt;URL parameters or           |
|             | request body attributes&gt;     |
+-------------+------------------------------+
|     Outputs | &lt;body attributes&gt;            |
+-------------+------------------------------+
</pre>
Only the most meaningful parameters are discussed in this document. Please refer to the OpenAPI specifications for full details.

field_data services are not required to handle intense traffic from a single client, such as the one that may result from being directly invoked on user interface interactions in an FMIS, for instance. Implementors MAY generate a 429 TOO MANY REQUESTS error response if the rate of calls exceed some pre-defined quota. Clients requiring more intense field information are advised to implement a mirroring mechanism using the subscription functions, as outlined in 4.1 Field Synchronisation.

<h2>5.1	Basic Functions</h2>

These operations return basic field information about a specific field or all fields in an account.

The basic field information includes the id, name and GeoJSON polygon boundary of a field. For detailed specifications, refer to the field_data OpenAPI specifications.

<h2>5.1.1 List Fields</h2>

This function returns the list of all fields (base information only) in an account
<pre>
+--------------------------------------------+
| list_fields                                |
+-------------+------------------------------+
|      Inputs | optional group id            |
+-------------+------------------------------+
|     Outputs | [urn, field info]            |
+-------------+------------------------------+
</pre>
Archived fields SHALL NOT be returned by list_fields.

<h2>5.1.2	Get Field Information</h2>

This function returns the base information of a specific field.
<pre>
+--------------------------------------------+
| get_field_info                             |
+-------------+------------------------------+
|      Inputs | optional group id            |
+-------------+------------------------------+
|     Outputs | id, urn, name, boundaries    |
+-------------+------------------------------+
</pre>
Services MUST return information even when the field is archived.

A field urn MUST have the following format:

    urn:&lt;service_id&gt;:&lt;field_id&gt;

where &lt;service_id&gt; is the ATLAS id of the field_data service on which the query was made. Field URNs are often passed as parameters to other types of services. These services must validate that the &lt;service_id&gt; in the URN matches a field_data service to which they are paired.

Boundaries are defined as a GeoJSON polygon feature where the "holes" represent areas with driving restrictions (water, trees, fenced area, ...). The coordinates MAY include elevation information relevant to drivability.

<h2>5.1.3 List Groups</h2>

This function returns the list of groups defined in an account. Fields may be arbitrarily grouped for convenience in a field_data service (i.e., annual crops, orchards, vineyards ...) in order to optimize the queries for relevant fields. The group definition and configuration, if any, should be provided by the vendor's proprietary configuration and management tools.
<pre>
+--------------------------------------------+
| list_groups                                |
+-------------+------------------------------+
|      Inputs | none                         |
+-------------+------------------------------+
|     Outputs | [id, name, description]      |
+-------------+------------------------------+
</pre>
A specific implementation may elect not to provide groups in which case they must simply return an empty array.

<h2>5.2 Crop Information</h2>

<h2>5.2.1 Get Crop History</h2>

Returns information on crops over time in the field.
<pre>
+--------------------------------------------+
| get_crop_history                           |
+-------------+------------------------------+
|      Inputs | field id                     |
+-------------+------------------------------+
|     Outputs | [crop details]               |
+-------------+------------------------------+
</pre>
Services MUST return the history in chronological order (sorted by ascending dates)

 Crop history information MUST be immutable except for the most current item which may be edited.

<h2>5.2.2 Get Crop Details</h2>
<pre>
+--------------------------------------------+
| get_crop_details                           |
+-------------+------------------------------+
|      Inputs | field id, date               |
+-------------+------------------------------+
|     Outputs | date, crop id, layout,       |
|             | season_start_date            |
+-------------+------------------------------+
</pre>
Services MUST return the crop information corresponding to the most recent information whose date is smaller or equal to the requested date.

If no crop details are available, services MUST return 204 NO CONTENT.

If date is not specified, the current (latest) crop details are returned.

If date is specified it MUST NOT be in the future.

If no date match is found (date is older that oldest crop details), services MUST return 204 NO CONTENT.

The crop layout represents the "seedable" areas of the field, such as vineyard rows, individual trees, etc. The coordinates MAY include elevation information relevant to the type of crop.

Crop layout, if present, MUST be fully contained within the field boundaries.

season_start_date is the date at which the latest crop season starts. When available, it MUST NOT be older than 9 months from the current date. Otherwise, it MUST be omitted (even if an outdated value is available in the service).

<h2>5.3 Driving Path</h2>

<h2>5.3.1 Get Driving Path</h2>

Only "AB Line" are supported at the moment. By convention, the AB line must be aligned with the edge of a field boundary; it will be dynamically adjusted by the consumer to take the width of the attached implement into account.
<pre>
+--------------------------------------------+
| get_driving_path                           |
+-------------+------------------------------+
|      Inputs | field id                     |
+-------------+------------------------------+
|     Outputs | start point coordinates,     |
|             | end point coordinates        |
+-------------+------------------------------+
</pre>
If not driving path is defined or not supported, services MUST return 204 NO CONTENT error.

<h2>5.4 Applications Results Functions</h2>

Application results are operations that are performed on a field, yielding results in the form of application maps, that are necessary for reporting or as inputs for other services. At this time, field_data defines specific application results formats for "fertilization", "crop_protection", "irrigation", "harvesting" and "sowing". A general-purpose type "other" is available for types of applications that have not yet been formalized (see 6.1 Application Results File Formats).

The results of an application are always in GeoPackage format but with conventions that are specific to each application type.

<h2>5.4.1 Get Application Results</h2>

Returns the information on specific nutrient amounts that have been applied to a field
<pre>
+--------------------------------------------+
| get_application_results                    |
+-------------+------------------------------+
|      Inputs | field id, application_type,  |
|             | from_date                    |
+-------------+------------------------------+
|     Outputs | [date, application metadata, |
|             |  gpkg download url]          |
+-------------+------------------------------+
</pre>
<h2>5.4.2  Add Application Result</h2>

Stores application data for resulting from a specific
application type performed on a field. The applications are
immutable and cannot be updated or deleted.
<pre>
+--------------------------------------------+
| add_application_result                     |
+-------------+------------------------------+
|      Inputs | field id, gpkg               |
+-------------+------------------------------+
|     Outputs | none                         |
+-------------+------------------------------+
</pre>
A field_data service MUST validate that gpkg (application result GeoPackage) is in valid format (see 6.1 Application Results File Formats.

<h2>5.5 Subscription Management Functions</h2>

<h2>5.5.1 Subscribe</h2>

Registers a notification URL that will be invoked by the field service whenever information about a field is changed. Subscriptions may automatically expire after some time and must be explicitly refreshed by their creator to remain in the system.
<pre>
+--------------------------------------------+
| subscribe                                  |
+-------------+------------------------------+
|      Inputs | Notification URL             |
+-------------+------------------------------+
|     Outputs | Subscription id,             |
|             | expiration date              |
+-------------+------------------------------+
</pre>
<h2>5.5.2 Refresh a Subscription</h2>

Refresh a subscription to prevent it from being automatically cancelled.
<pre>
+--------------------------------------------+
| refresh_subscription                       |
+-------------+------------------------------+
|      Inputs | Subscription id              |
+-------------+------------------------------+
|     Outputs | expiration date              |
+-------------+------------------------------+
</pre>
<h2>5.5.3 Unsubscribe</h2>

Refresh a subscription to prevent it from being automatically cancelled.
<pre>
+--------------------------------------------+
| unsubscribe                                |
+-------------+------------------------------+
|      Inputs | Subscription id              |
+-------------+------------------------------+
|     Outputs | none                         |
+-------------+------------------------------+
</pre>
<h2>6 Data Formats</h2>

This section focuses on the description of binary (file) data formats. Please refer to the field_data OpenAPI specifications for details on all other payload and parameter descriptions.

<h2>6.1 Application Results File Formats</h2>

Application result data MUST be in GeoPackage (<a href="https://www.geopackage.org/">https://www.geopackage.org/</a>) format version 1.2 or newer.
<pre>
+=========================================================+
|                TABLE gpkg_contents                      |
+=====+=============+=====================================+
| ROW | COLUMN      | VALUE                               |
+-----+-------------+-------------------------------------+
|     | table_name  | "atlas"                             |
|     +-------------+-------------------------------------+
|     | data_type   | "attributes"                        |
+-----+-------------+-------------------------------------+
|     | table_name  | "application_info"                  |
|     +-------------+-------------------------------------+
|     | data_type   | "attributes"                        |
+-----+-------------+-------------------------------------+
</pre>
All Atlas GeoPackage files MUST contain an attributes table named "atlas" with the following structure:
<pre>
+============================+
|     TABLE atlas            |
+================+===========+
| COLUMN         | TYPE      |
+----------------+-----------+
| id             | INTEGER   |
| type           | TEXT      |
| participant    | TEXT      |
| format_version | TEXT      |
+----------------+-----------+
</pre>
and a single row:
<pre>
+=========================================================+
|                TABLE atlas                              |
+=====+================+==================================+
| ROW | COLUMN         | VALUE                            |
+-----+----------------+----------------------------------+
|     | type           | "application_result"             |
|     +----------------+----------------------------------+
|     | participant    | "&lt;atlas participant id&gt;"         |
|  1  +----------------+----------------------------------+
|     | application    | "..."                            |
|     +----------------+----------------------------------+
|     | format_version | "MAJOR.MINOR"                    |
+-----+----------------+----------------------------------+
</pre>
Services SHALL validate that the "atlas.participant" field matches the information attached to the authentication context in which the file is uploaded.

If the GeoPackage was generated and uploaded by an Atlas Service, then "atlas.application" SHOULD be "&lt;service name&gt;-&lt;service version&gt;", otherwise it MAY contain "&lt;application name&gt;-&lt;application version&gt;". In either case, no validation will be performed.

The "atlas.format_version" field MUST be the version of the field_data template that is targeted by the client uploading the file. GeoPackage files of a given type are guaranteed to be compatible (no breaking changes) for a same MAJOR version of "atlas.format_version".

field_data services MUST validate that the "atlas.type" column is equal to "application_result".

By general convention, all application result GeoPackage files MUST contain an attributes table named "application_info" with the following structure:
<pre>
+============================+
|  TABLE application_info    |
+================+===========+
| COLUMN         | TYPE      |
+----------------+-----------+
| id             | INTEGER   |
| type           | TEXT      |
| date           | DATETIME  |
| info           | TEXT      |
+----------------+-----------+
</pre>
and a single row:
<pre>
+=========================================================+
|                TABLE application_info                   |
+=====+=============+=====================================+
| ROW | COLUMN      | VALUE                               |
+-----+-------------+-------------------------------------+
|     | type        | "fertilization|crop_protection|     |
|     |             | irrigation|harvesting|sowing|other" |
|  1  +-------------+-------------------------------------+
|     | date        | "yyyy-MM-ddTHH:mm:ssZ"              |
|     +-------------+-------------------------------------+
|     | info        | "&lt;type-specific info (JSON)&gt;"       |
+-----+-------------+-------------------------------------+
</pre>
Additional application type-specific conventions, within the GeoPackage standard, are defined below. Service implementations MUST perform basic validity checks on submitted GeoPackage files to make sure they comply with the requirements of this section.

<h2>6.1.1 Fertilisation Application Type</h2>

In addition to the base tables, a fertilisation application result GeoPackage MUST contain a product data table.
<pre>
+=========================================================+
|                TABLE gpkg_contents                      |
+=====+=============+=====================================+
| ROW | COLUMN      | VALUE                               |
+-----+-------------+-------------------------------------+
|                    ...                                  |
+-----+-------------+-------------------------------------+
|     | table_name  | "product"                           |
|     +-------------+-------------------------------------+
|     | data_type   | "2d-gridded-coverage|features"      |
+-----+-------------+-------------------------------------+
</pre>
If the data_type of the "product" table is "features", then the columns must be as follows:
<pre>
+=========================================================+
|                    TABLE product                        |
+=====+=================+=================================+
| ROW | COLUMN          | VALUE                           |
+-----+-----------------+---------------------------------+
|     | id              | "INTEGER"                       |
|     +-----------------+---------------------------------+
|     | geometry        | "GeoPackage Geometry"           |
|     +-----------------+---------------------------------+
|     | amount          | "amount in product units (REAL)"|
+-----+-----------------+---------------------------------+
</pre>
Instead, if the data_type of the product table is "2d-gridded-coverage" then it must be defined as follows:
<pre>
+=========================================================+
|                    TABLE product                        |
+=====+=================+=================================+
| ROW | COLUMN          | VALUE                           |
+-----+-----------------+---------------------------------+
|     | id              | "INTEGER"                       |
|     +-----------------+---------------------------------+
|     | zoom_level      | "INTEGER"                       |
|     +-----------------+---------------------------------+
|     | tile_column     | "INTEGER"                       |
|     +-----------------+---------------------------------+
|     | tile_row        | "INTEGER"                       |
|     +-----------------+---------------------------------+
|     | tile_data       | "BLOB (TIFF)"                   |
+-----+-----------------+---------------------------------+
</pre>
Where tile_data is a tiff blob holding Float32 values as per GeoPackage specifications.

In either case, the product values are in the units specified in "application_info.info.product.unit".

Fertilisation "application_info.info" is a JSON object serialized as a string, such as:
<pre>
+-----------------------------------------------+
| {                                             |
|   "product": {                                |
|      "name": "optional name",                 |
|      "unit": "kg|l",                          |
|      "nutrients": {                           |
|         "N": &lt;amount_in_grams_per_unit&gt;,      |
|         "P2O5": &lt;amount_in_grams_per_unit&gt;,   |
|         "K2O": &lt;amount_in_grams_per_unit&gt;,    |
|         ...                                   |
|      }                                        |
|   },                                          |
|   "amount": &lt;amount_in_product_unit&gt;          |
| }                                             |
+-----------------------------------------------+
</pre>
The nutrient identifier (e.g., P2O5) are defined in the fertilisation_advisor service template. The "amount" attribute is the total amount of product that was applied on the entire field; it must match the sum of all values in the "product" table.

<h2>6.1.2 Crop Protection Application Type</h2>

In addition to the base tables, a crop protection application result GeoPackage MUST contain a product data table.
<pre>
+=========================================================+
|                TABLE gpkg_contents                      |
+=====+=============+=====================================+
| ROW | COLUMN      | VALUE                               |
+-----+-------------+-------------------------------------+
|                    ...                                  |
+-----+-------------+-------------------------------------+
|     | table_name  | "product"                           |
|     +-------------+-------------------------------------+
|     | data_type   | "2d-gridded-coverage|features"      |
+-----+-------------+-------------------------------------+
</pre>
If the data_type of the "product" table is "features", then the columns must be as follows:
<pre>
+=========================================================+
|                    TABLE product                        |
+=====+=================+=================================+
| ROW | COLUMN          | VALUE                           |
+-----+-----------------+---------------------------------+
|     | id              | "INTEGER"                       |
|     +-----------------+---------------------------------+
|     | geometry        | "GeoPackage Geometry"           |
|     +-----------------+---------------------------------+
|     | amount          | "amount in product units (REAL)"|
+-----+-----------------+---------------------------------+
</pre>
Instead, if the data_type of the product table is
"2d-gridded-coverage" then it must be defined as follows:
<pre>
+=========================================================+
|                    TABLE product                        |
+=====+=================+=================================+
| ROW | COLUMN          | VALUE                           |
+-----+-----------------+---------------------------------+
|     | id              | "INTEGER"                       |
|     +-----------------+---------------------------------+
|     | zoom_level      | "INTEGER"                       |
|     +-----------------+---------------------------------+
|     | tile_column     | "INTEGER"                       |
|     +-----------------+---------------------------------+
|     | tile_row        | "INTEGER"                       |
|     +-----------------+---------------------------------+
|     | tile_data       | "BLOB (TIFF)"                   |
+-----+-----------------+---------------------------------+
</pre>
Where tile_data is a tiff blob holding Float32 values as per GeoPackage specifications.

In either case, the product values are in the units specified in "application_info.info.product.unit".

Crop protection "application_info.info" is a JSON object serialized as a string, such as:
<pre>
+-----------------------------------------------+
| {                                             |
|   "product": {                                |
|      "name": "optional name",                 |
|      "unit": "kg|l",                          |
|      "substances": {                          |
|         "80-56-8": &lt;amnt_in_grams_per_unit&gt;,  |
|         ...                                   |
|      }                                        |
|   },                                          |
|   "amount": &lt;amount_in_product_unit&gt;          |
| }                                             |
+-----------------------------------------------+
</pre>
The substance identifier (e.g., 80-56-8) are defined in the crop_protection_advisor service template. The "amount" attribute is the total amount of product that was applied on the entire field; it must match the sum of all values in the "product" table.

<h2>6.1.3 Irrigation Application Type</h2>

In addition to the base tables, an irrigation application result GeoPackage MUST contain a water data table.
<pre>
+=========================================================+
|                TABLE gpkg_contents                      |
+=====+=============+=====================================+
| ROW | COLUMN      | VALUE                               |
+-----+-------------+-------------------------------------+
|                    ...                                  |
+-----+-------------+-------------------------------------+
|     | table_name  | "water"                             |
|     +-------------+-------------------------------------+
|     | data_type   | "2d-gridded-coverage|features"      |
+-----+-------------+-------------------------------------+
</pre>
If the data_type of the "water" table is "features", then the columns must be as follows:
<pre>
+=========================================================+
|                    TABLE water                          |
+=====+=================+=================================+
| ROW | COLUMN          | VALUE                           |
+-----+-----------------+---------------------------------+
|     | id              | "INTEGER"                       |
|     +-----------------+---------------------------------+
|     | geometry        | "GeoPackage Geometry"           |
|     +-----------------+---------------------------------+
|     | amount          | "amount in product units (REAL)"|
+-----+-----------------+---------------------------------+
</pre>
Instead, if the data_type of the water table is "2d-gridded-coverage" then it must be defined as follows:
<pre>
+=========================================================+
|                    TABLE water                          |
+=====+=================+=================================+
| ROW | COLUMN          | VALUE                           |
+-----+-----------------+---------------------------------+
|     | id              | "INTEGER"                       |
|     +-----------------+---------------------------------+
|     | zoom_level      | "INTEGER"                       |
|     +-----------------+---------------------------------+
|     | tile_column     | "INTEGER"                       |
|     +-----------------+---------------------------------+
|     | tile_row        | "INTEGER"                       |
|     +-----------------+---------------------------------+
|     | tile_data       | "BLOB (TIFF)"                   |
+-----+-----------------+---------------------------------+
</pre>
Where tile_data is a tiff blob holding Float32 values as per GeoPackage specifications.

In either case, the water values are in m3.

Irrigation "application_info.info" is a JSON object serialized as a string, such as:
<pre>
+-----------------------------------------------+
| {                                             |
|   "amount": &lt;amount_in_m<sup>3</sup>&gt;                    |
| }                                             |
+-----------------------------------------------+
</pre>
The "amount" attribute is the total amount of water that was applied on the entire field; it must match the sum of all values in the "water" table.

<h2>6.1.4 Harvesting Application Type</h2>

In addition to the base tables, a harvesting application result GeoPackage MUST contain a yield table.
<pre>
+=========================================================+
|                TABLE gpkg_contents                      |
+=====+=============+=====================================+
| ROW | COLUMN      | VALUE                               |
+-----+-------------+-------------------------------------+
|                    ...                                  |
+-----+-------------+-------------------------------------+
|     | table_name  | "yield"                             |
|     +-------------+-------------------------------------+
|     | data_type   | "2d-gridded-coverage|features"      |
+-----+-------------+-------------------------------------+
</pre>
If the data_type of the "yield" table is "features", then the columns must be as follows:
<pre>
+=========================================================+
|                    TABLE yield                          |
+=====+=================+=================================+
| ROW | COLUMN          | VALUE                           |
+-----+-----------------+---------------------------------+
|     | id              | "INTEGER"                       |
|     +-----------------+---------------------------------+
|     | geometry        | "GeoPackage Geometry"           |
|     +-----------------+---------------------------------+
|     | amount          | "amount in crop units (REAL)"   |
+-----+-----------------+---------------------------------+
</pre>
Instead, if the data_type of the yield table is "2d-gridded-coverage" then it must be defined as follows:
<pre>
+=========================================================+
|                    TABLE yield                          |
+=====+=================+=================================+
| ROW | COLUMN          | VALUE                           |
+-----+-----------------+---------------------------------+
|     | id              | "INTEGER"                       |
|     +-----------------+---------------------------------+
|     | zoom_level      | "INTEGER"                       |
|     +-----------------+---------------------------------+
|     | tile_column     | "INTEGER"                       |
|     +-----------------+---------------------------------+
|     | tile_row        | "INTEGER"                       |
|     +-----------------+---------------------------------+
|     | tile_data       | "BLOB (TIFF)"                   |
+-----+-----------------+---------------------------------+
</pre>
Where tile_data is a tiff blob holding Float32 values as per GeoPackage specifications.

In either case, the product values are in the units specified in "application_info.info.crop.unit".

Harvesting "application_info.info" is a JSON object serialized as a string, such as:
<pre>
+-----------------------------------------------+
| {                                             |
|   "crop": {                                   |
|     "crop_id": "&lt;crop_id&gt;",                   |
|     "unit": "kg|count"                        |
|   },                                          |
|   "amount": &lt;amount&gt;                          |
| }                                             |
+-----------------------------------------------+
</pre>
The "crop_id" attribute is defined as per ANNEX 1 - Crop Reference Data. The "amount" attribute is the total amount of crops (in the specified units) harvested in the entire field; it must match the sum of all values in the "yield" table.

<h2>6.1.5 Sowing Application Type</h2>

In addition to the base tables, a sowing application result GeoPackage MUST contain a "seed_or_plant" table.
<pre>
+=========================================================+
|                TABLE gpkg_contents                      |
+=====+=============+=====================================+
| ROW | COLUMN      | VALUE                               |
+-----+-------------+-------------------------------------+
|                    ...                                  |
+-----+-------------+-------------------------------------+
|     | table_name  | "seed"                              |
|     +-------------+-------------------------------------+
|     | data_type   | "2d-gridded-coverage|features"      |
+-----+-------------+-------------------------------------+
</pre>
If the data_type of the "product" table is "features", then the columns must be as follows:
<pre>
+=========================================================+
|                    TABLE seed                           |
+=====+=================+=================================+
| ROW | COLUMN          | VALUE                           |
+-----+-----------------+---------------------------------+
|     | id              | "INTEGER"                       |
|     +-----------------+---------------------------------+
|     | geometry        | "GeoPackage Geometry"           |
|     +-----------------+---------------------------------+
|     | amount          | "amount in seed units (REAL)"   |
+-----+-----------------+---------------------------------+
</pre>
Instead, if the data_type of the product table is "2d-gridded-coverage" then it must be defined as follows:
<pre>
+=========================================================+
|                    TABLE seed                           |
+=====+=================+=================================+
| ROW | COLUMN          | VALUE                           |
+-----+-----------------+---------------------------------+
|     | id              | "INTEGER"                       |
|     +-----------------+---------------------------------+
|     | zoom_level      | "INTEGER"                       |
|     +-----------------+---------------------------------+
|     | tile_column     | "INTEGER"                       |
|     +-----------------+---------------------------------+
|     | tile_row        | "INTEGER"                       |
|     +-----------------+---------------------------------+
|     | tile_data       | "BLOB (TIFF)"                   |
+-----+-----------------+---------------------------------+
</pre>
Where tile_data is a tiff blob holding Float32 values as per GeoPackage specifications.

In either case, the seed values are in the units specified in "application_info.info.seed.unit".

Sowing "application_info.info" is a JSON object serialized as a string, such as:
<pre>
+-----------------------------------------------+
| {                                             |
|   "seed": {                                   |
|     "crop_id": "&lt;crop_id&gt;",                   |
|     "variety": "&lt;optional variety name&gt;",     |
|     "batch_no": "&lt;optional batch number&gt;",    |
|     "unit": "kg|count",                       |
|     "weight_of_1000": &lt;in kg&gt;                 |
|   },                                          |
|   "amount": &lt;amount&gt;                          |
| }                                             |
+-----------------------------------------------+
</pre>
The "crop_id" attribute is defined as per ANNEX 1 - Crop Reference Data. The "weight_of_1000" attribute is the weight in kg for 1000 seeds; it can be used to map units between kg and count. The "amount" attribute is the total amount of seed (in the specified units) sowed in the entire field; it must match the sum of all values in the "seed" table.

<h2>6.1.6 Other Application Type</h2>

The "other" application type is meant to provide a temporary solution for application types that have not yet been standardized.

In addition to the base tables, an "other" application result GeoPackage MAY contain an arbitrary number of additional data and attribute tables.

"Other" "application_info.info" is an arbitrary JSON object serialized as a string with no defined convention. It is expected that the consumers and producers of these files will agree on private interpretation of the "application_info.info" to carry out their operations.

field_data services MUST store "other" application result GeoPackage files with only minimal generic validation.

<h2>7 Access and Authentication</h2>

Farmers MUST have an account setup on a field_data service in order to authenticate and access API endpoints. The service implementor is responsible for the creation of accounts; it is not covered in the ATLAS Service Template specifications.

Unless specifically documented in the OpenAPI specifications, all operation must include credentials in form of Bearer authentication (also called token authentication). Clients can obtain an access token on behalf of their user from the service's authorization server (see ATLAS service pairing).

Some of the information held by field_data services are considered to be sensitive from a GDPR perspective.The service's authorization server MUST request the client's end-user consent at service pairing time in order to deliver an access token.

<h2>8 Dynamic Behaviour</h2>

The purpose of the diagrams in this section is to illustrate communication patterns, more complex than plain request/response API calls, that involve several interactions and/or asynchronous behaviour. Even though a sequence diagram representation is used, the diagrams are by no means to be interpreted as UML Sequence Diagrams. Specifically, in the spirit of focusing on functional behaviour and readability, error handling is deliberately not covered in the diagram.

<h2>8.1 Subscriptions</h2>

The service template mandates a "notification event" pattern. In this pattern, only the information that an event (creation, update, deletion) has occurred will be sent (see Subscription Notification), and in case of updates, the kind of information that changed. It is up to the subscriber to decide whether the event is relevant and whether to perform a data query upon reception of the notification or not.

<img src="doc/subscription.png" style="width: 420px"/>

A notification is considered successful if the client returns a http result code 2XX.

Errors may occur during notification delivery. Depending on the type of error, services must react in different ways:

i) Network error - the connection to the client's host (from notification URL) cannot be established. The service MUST retry a certain number of times. The number of retries and possible backoff strategy is left at the discretion of the service implementer.

ii) Server errors (5XX result code) - these errors are potentially transient. The same strategy as for Network errors SHOULD be applied.

iii) Client errors (4XX result code) - typically when the notification URL is invalid, or the authentication is invalid/expired. 4XX errors should never be sent for transient client-side conditions and therefore services SHOULD NOT attempt retries.

Upon an excessive number of errors, services MAY automatically cancel a subscription. In that case, they SHOULD perform a "soft" cancellation where, instead of deleting the subscription record, a subscription can be reactivated upon reception of a refresh_subscription call.

<h2>8.2 Subscription Notification</h2>

The notification URL supplied by the subscriber MUST be invoked with an HTTP POST command.

When a notification authorisation parameter was supplied by the subscriber, the service MUST include a bearer token authentication in the form of an HTTP header:

Authorization: bearer &lt;notification authorization&gt;

A notification payload describing the type of event MUST be included:
<pre>
  {
    "subscription_id": "&lt;my subscription id&gt;",
    "date": "&lt;ISO 8601 UTC date/time&gt;",
    "field_urn": "&lt;target field URN&gt;",
    "event ": "CREATED|UPDATED|DELETED",
    "changes": ["attributes"]
  }
</pre>
In case of an UPDATE event, services SHOULD include the name of the attributes that were changed in the form of attribute JSONPaths. This allows subscribers to filter relevant notifications based on the field data that is relevant to their purpose. In the absence of changed attributes information, the subscriber must assume that all attributes have changed.

<pre>
Notifications are generated for the following "attributes":
    - base
    - crop (for any change in crop details or crop_history)
    - driving_path (for any change in driving path)
    - applications (after application results are added)
</pre>
Implementations of field_data are responsible for providing end-user configuration and management tools in their proprietary user interface, such as import from a shapefile, boundary editing in the browser, ... Changes generated by these tools must generate an appropriate notification where relevant.

<h2>ANNEX 1 - Crop Reference Data</h2>

Crop IDs in ATLAS are taken from the FAO's CROP LIST (<a
        href="https://www.fao.org/economic/the-statistics-division-ess/world-census-of-agriculture/programme-for-the-world-census-of-agriculture-2000/appendix-4-crop-list">https://www.fao.org/economic/the-statistics-division-ess/world-census-of-agriculture/programme-for-the-world-census-of-agriculture-2000/appendix-4-crop-list</a>)

Only the crop id scheme is fundamentally relevant as a common reference. Software applications are free to provide their preferred names and translations.

<table>
<tr style="font-weight: bold"><td width="70">1</td><td>TEMPORARY CROPS</td></tr>
<tr style="font-weight: bold"><td>1.1</td><td>Cereals harvested for grain</td></tr>
<tr><td>1.1.1</td><td>Wheat</td></tr>
<tr><td>1.1.1.1</td><td>Winter wheat</td></tr>
<tr><td>1.1.1.1.1</td><td>Hard wheat (including durum and semihard wheat)</td></tr>
<tr><td>1.1.1.1.2</td><td>Soft wheat</td></tr>
<tr><td>1.1.1.2</td><td>Spring wheat</td></tr>
<tr><td>1.1.1.2.1</td><td>Hard wheat (including durum and semihard wheat)</td></tr>
<tr><td>1.1.1.2.2</td><td>Soft wheat</td></tr>
<tr><td>1.1.2</td><td>Rice</td></tr>
<tr><td>1.1.2.1</td><td>Wetland (lowland)</td></tr>
<tr><td>1.1.2.2</td><td>Dryland (upland)</td></tr>
<tr><td>1.1.3</td><td>Maize (corn)</td></tr>
<tr><td>1.1.3.1</td><td>Hybrid maize</td></tr>
<tr><td>1.1.3.2</td><td>Ordinary maize</td></tr>
<tr><td>1.1.4</td><td>Barley</td></tr>
<tr><td>1.1.4.1</td><td>Winter barley</td></tr>
<tr><td>1.1.4.2</td><td>Spring barley</td></tr>
<tr><td>1.1.5</td><td>Millet and Sorghum</td></tr>
<tr><td>1.1.5.1</td><td>Millet</td></tr>
<tr><td>1.1.5.1.1</td><td>Finger millet (for example, pearl millet, bullrush millet)</td></tr>
<tr><td>1.1.5.1.2</td><td>Other millet (for example, bajra, Japanese millet)</td></tr>
<tr><td>1.1.5.2</td><td>Sorghum (for example, jowar, Guinea corn, durra)</td></tr>
<tr><td>1.1.6</td><td>Oats</td></tr>
<tr><td>1.1.7</td><td>Rye</td></tr>
<tr><td>1.1.7.1</td><td>Winter rye</td></tr>
<tr><td>1.1.7.2</td><td>Spring rye</td></tr>
<tr><td>1.1.8</td><td>Mixed cereals for grain (for example, maslin spelt, teff)</td></tr>
<tr style="font-weight: bold"><td>1.2</td><td>Tuber, root and bulk crops</td></tr>
<tr><td>1.2.1</td><td>Potato</td></tr>
<tr><td>1.2.2</td><td>Sweet potato</td></tr>
<tr><td>1.2.3</td><td>Cassava (manioc, tapioca)</td></tr>
<tr><td>1.2.4</td><td>Yam</td></tr>
<tr><td>1.2.5</td><td>Arrowroot</td></tr>
<tr><td>1.2.6</td><td>Dry onion</td></tr>
<tr><td>1.2.7</td><td>Dry garlic</td></tr>
<tr><td>1.2.8</td><td>Taro (cocoyam, dasheen, edoe, tannia)</td></tr>
<tr><td>1.2.9</td><td>Others n.e.s.</td></tr>
<tr style="font-weight: bold"><td>1.3</td><td>Leguminous plants mainly for grain (excluding soybean and groundnut)</td></tr>
<tr><td>1.3.1</td><td>Edible dry beans</td></tr>
<tr><td>1.3.2</td><td>Dry broad bean (horse bean)</td></tr>
<tr><td>1.3.3</td><td>Edible dry peas</td></tr>
<tr><td>1.3.4</td><td>Chick pea (gram)</td></tr>
<tr><td>1.3.5</td><td>Lentil</td></tr>
<tr><td>1.3.6</td><td>Cowpea</td></tr>
<tr><td>1.3.7</td><td>Pigeon pea</td></tr>
<tr><td>1.3.8</td><td>Vetches</td></tr>
<tr><td>1.3.9</td><td>Others n.e.s. (for example, lupines, fenugreek, bambara nut)</td></tr>
<tr style="font-weight: bold"><td>1.4</td><td>Crops mainly for industrial purposes</td></tr>
<tr><td>1.4.1</td><td>Sugar crops</td></tr>
<tr><td>1.4.1.1</td><td>Sugar cane</td></tr>
<tr><td>1.4.1.2</td><td>Sugar beet</td></tr>
<tr><td>1.4.1.3</td><td>Others n.e.s. (for example, sweet sorghum)</td></tr>
<tr><td>1.4.2</td><td>Oilseed crops</td></tr>
<tr><td>1.4.2.0.1</td><td>Groundnut (peanut)</td></tr>
<tr><td>1.4.2.0.2</td><td>Soybean</td></tr>
<tr><td>1.4.2.0.3</td><td>Flax (linseed)</td></tr>
<tr><td>1.4.2.0.4</td><td>Sunflower</td></tr>
<tr><td>1.4.2.0.5</td><td>Rapeseed (colza)</td></tr>
<tr><td>1.4.2.0.6</td><td>Mustard</td></tr>
<tr><td>1.4.2.0.7</td><td>Sesame</td></tr>
<tr><td>1.4.2.0.8</td><td>Cottonseed</td></tr>
<tr><td>1.4.2.0.9</td><td>Safflower seed</td></tr>
<tr><td>1.4.2.1.0</td><td>Castor bean</td></tr>
<tr><td>1.4.2.1.1</td><td>Others n.e.s. (for example, hempseed, poppy seed, niger seed)</td></tr>
<tr><td>1.4.3</td><td>Spices, condiments, aromatic and medicinal plants</td></tr>
<tr><td>1.4.3.1</td><td>Dry peppers, pimento or chilli</td></tr>
<tr><td>1.4.3.2</td><td>Oil plants for essence (for example, geranium, lavender, mint)</td></tr>
<tr><td>1.4.3.3</td><td>Medicinal plants (for example, opium, liquorice)</td></tr>
<tr><td>1.4.3.4</td><td>Others n.e.s. (for example, aniseed, caraway seed)</td></tr>
<tr><td>1.4.4</td><td>Fibre crops</td></tr>
<tr><td>1.4.4.1</td><td>Cotton</td></tr>
<tr><td>1.4.4.2</td><td>Flax for fibre</td></tr>
<tr><td>1.4.4.3</td><td>Hemp for fibre</td></tr>
<tr><td>1.4.4.4</td><td>Jute</td></tr>
<tr><td>1.4.4.5</td><td>Others n.e.s. (for example, sunn hemp, kenaf, urena)</td></tr>
<tr><td>1.4.5</td><td>Other industrial crops</td></tr>
<tr><td>1.4.5.1</td><td>Tobacco</td></tr>
<tr><td>1.4.5.1.1</td><td>Fluecured</td></tr>
<tr><td>1.4.5.1.1</td><td>Other types</td></tr>
<tr><td>1.4.5.2</td><td>Chicory</td></tr>
<tr><td>1.4.5.3</td><td>Pyrethrum</td></tr>
<tr><td>1.4.5.4</td><td>Others n.e.s. (e.g. indigo, heena, broom millet, broom sorghum, esparto grass, sugar cane for thatching)</td></tr>
<tr style="font-weight: bold"><td>1.5</td><td>Vegetables mainly for human consumption</td></tr>
<tr><td>1.5.1</td><td>Leafy or stem vegetables</td></tr>
<tr><td>1.5.1.0.1</td><td>Artichokes</td></tr>
<tr><td>1.5.1.0.2</td><td>Asparagus</td></tr>
<tr><td>1.5.1.0.3</td><td>Brussels sprouts</td></tr>
<tr><td>1.5.1.0.4</td><td>Cabbage (red, white, savoy)</td></tr>
<tr><td>1.5.1.0.5</td><td>Celery</td></tr>
<tr><td>1.5.1.0.6</td><td>Chicory for greens</td></tr>
<tr><td>1.5.1.0.7</td><td>Chinese cabbage</td></tr>
<tr><td>1.5.1.0.8</td><td>Cress</td></tr>
<tr><td>1.5.1.0.9</td><td>Endive</td></tr>
<tr><td>1.5.1.1.0</td><td>Kale</td></tr>
<tr><td>1.5.1.1.1</td><td>Leek</td></tr>
<tr><td>1.5.1.1.2</td><td>Salad crops</td></tr>
<tr><td>1.5.1.1.3</td><td>Rhubarb</td></tr>
<tr><td>1.5.1.1.4</td><td>Spinach</td></tr>
<tr><td>1.5.1.1.5</td><td>Others n.e.s. (for example, cardoon, fennel, corn salad)</td></tr>
<tr><td>1.5.2</td><td>Fruitbearing vegetables</td></tr>
<tr><td>1.5.2.0.1</td><td>Cantaloupe and other melons</td></tr>
<tr><td>1.5.2.0.2</td><td>Chilli (fresh)</td></tr>
<tr><td>1.5.2.0.3</td><td>Cucumber</td></tr>
<tr><td>1.5.2.0.4</td><td>Eggplant</td></tr>
<tr><td>1.5.2.0.5</td><td>Gourd</td></tr>
<tr><td>1.5.2.0.6</td><td>Okra</td></tr>
<tr><td>1.5.2.0.7</td><td>Pumpkin</td></tr>
<tr><td>1.5.2.0.8</td><td>Squash</td></tr>
<tr><td>1.5.2.0.9</td><td>Sweet pepper</td></tr>
<tr><td>1.5.2.1.0</td><td>Tomato</td></tr>
<tr><td>1.5.2.1.1</td><td>Watermelon</td></tr>
<tr><td>1.5.2.1.2</td><td>Others n.e.s. (for example chayot)</td></tr>
<tr><td>1.5.3</td><td>Root, bulb and tuberous vegetables</td></tr>
<tr><td>1.5.3.1</td><td>Carrot</td></tr>
<tr><td>1.5.3.2</td><td>Green garlic</td></tr>
<tr><td>1.5.3.3</td><td>Green onion</td></tr>
<tr><td>1.5.3.4</td><td>Radish</td></tr>
<tr><td>1.5.3.5</td><td>Red beet</td></tr>
<tr><td>1.5.3.6</td><td>Rutabagas or swedes and kohlrabi</td></tr>
<tr><td>1.5.3.7</td><td>Turnips</td></tr>
<tr><td>1.5.3.8</td><td>Others n.e.s. (for example, celeriac, horseradish, parsnip, sconzonera, salsify)</td></tr>
<tr><td>1.5.4</td><td>Leguminous vegetables harvested green</td></tr>
<tr><td>1.5.4.1</td><td>Beans</td></tr>
<tr><td>1.5.4.2</td><td>Peas</td></tr>
<tr><td>1.5.4.3</td><td>Others n.e.s. (for example, broad bean, cowpea)</td></tr>
<tr><td>1.5.5</td><td>Other vegetables</td></tr>
<tr><td>1.5.5.1</td><td>Cauliflower and broccoli</td></tr>
<tr><td>1.5.5.2</td><td>Corn (sweet)</td></tr>
<tr><td>1.5.5.3</td><td>Others n.e.s.</td></tr>
<tr style="font-weight: bold"><td>1.6</td><td>Special horticultural cultivation</td></tr>
<tr><td>1.6.1</td><td>Grown in the open</td></tr>
<tr><td>1.6.1.1</td><td>Flowers, bulbs and corms</td></tr>
<tr><td>1.6.1.2</td><td>Ornamental plants</td></tr>
<tr><td>1.6.1.3</td><td>Others n.e.s.</td></tr>
<tr><td>1.6.2</td><td>Cultivation under protective cover (for example, glass, plastic</td></tr>
<tr><td>1.6.2.1</td><td>Vegetables</td></tr>
<tr><td>1.6.2.2</td><td>Mushrooms</td></tr>
<tr><td>1.6.2.3</td><td>Flowers and ornamental plants</td></tr>
<tr><td>1.6.2.4</td><td>Others n.e.s.</td></tr>
<tr style="font-weight: bold"><td>1.7</td><td>Fodder crops (for grazing or cut for hay, green feed or silage)</td></tr>
<tr><td>1.7.1</td><td>Leguminous forage crops</td></tr>
<tr><td>1.7.1.1</td><td>Alfalfa</td></tr>
<tr><td>1.7.1.2</td><td>Clover</td></tr>
<tr><td>1.7.1.3</td><td>Others n.e.s. (for example, lespedeza, sainfoin, soybean hay)</td></tr>
<tr><td>1.7.2</td><td>Grasses</td></tr>
<tr><td>1.7.2.1</td><td>Grown alone (for example, timothy, red top, orchard grass, Sudan grass)</td></tr>
<tr><td>1.7.2.2</td><td>Mixed grasses</td></tr>
<tr><td>1.7.3</td><td>Cereals</td></tr>
<tr><td>1.7.3.1</td><td>Maize (corn) for silage</td></tr>
<tr><td>1.7.3.2</td><td>Oats</td></tr>
<tr><td>1.7.3.3</td><td>Others n.e.s.</td></tr>
<tr><td>1.7.4</td><td>Mixed legumes, grasses and cereals</td></tr>
<tr><td>1.7.5</td><td>Other fodder crops, n.e.s.</td></tr>
<tr><td>1.7.5.0.1</td><td>Cabbage</td></tr>
<tr><td>1.7.5.0.2</td><td>Jerusalem artichokes</td></tr>
<tr><td>1.7.5.0.3</td><td>Pumpkin</td></tr>
<tr><td>1.7.5.0.4</td><td>Sunflower</td></tr>
<tr><td>1.7.5.0.5</td><td>Mangel (fodder beet)</td></tr>
<tr><td>1.7.5.0.6</td><td>Sugar beet</td></tr>
<tr><td>1.7.5.0.7</td><td>Sugar cane</td></tr>
<tr><td>1.7.5.0.8</td><td>Swede</td></tr>
<tr><td>1.7.5.0.9</td><td>Turnip</td></tr>
<tr><td>1.7.5.1.0</td><td>Others n.e.s. (for example, carrot)</td></tr>
<tr style="font-weight: bold"><td>1.8</td><td>Crops grown mainly for the production of seed</td></tr>
<tr><td>1.8.1</td><td>Seed of sugarbeet</td></tr>
<tr><td>1.8.2</td><td>Alfalfa seed</td></tr>
<tr><td>1.8.3</td><td>Clover seed</td></tr>
<tr><td>1.8.4</td><td>Ryegrass seed</td></tr>
<tr><td>1.8.5</td><td>Onion seed</td></tr>
<tr><td>1.8.6</td><td>Others n.e.s. (for example trefoil)</td></tr>
<tr style="font-weight: bold"><td>1.9</td><td>Other temporary crops n.e.s.</td></tr>
<tr style="font-weight: bold"><td>2</td><td>PERMANENT CROPS</td></tr>
<tr style="font-weight: bold"><td>2.1</td><td>Fruit and nut trees</td></tr>
<tr><td>2.1.1</td><td>Citrus fruit</td></tr>
<tr><td>2.1.1.1</td><td>Oranges</td></tr>
<tr><td>2.1.1.2</td><td>Mandarin and Tangerine (including clementine and satsuma)</td></tr>
<tr><td>2.1.1.3</td><td>Lemon</td></tr>
<tr><td>2.1.1.4</td><td>Grapefruit and pomelo</td></tr>
<tr><td>2.1.1.5</td><td>Sour lime</td></tr>
<tr><td>2.1.1.6</td><td>Others n.e.s. (for example, bitter orange, sweet lime, citron, bergamot)</td></tr>
<tr><td>2.1.2</td><td>Pome fruit</td></tr>
<tr><td>2.1.2.1</td><td>Apple</td></tr>
<tr><td>2.1.2.2</td><td>Pear</td></tr>
<tr><td>2.1.2.3</td><td>Quince</td></tr>
<tr><td>2.1.2.4</td><td>Medlar</td></tr>
<tr><td>2.1.2.5</td><td>Others n.e.s. (for example, loquat)</td></tr>
<tr><td>2.1.3</td><td>Stone fruit</td></tr>
<tr><td>2.1.3.1</td><td>Apricot</td></tr>
<tr><td>2.1.3.2</td><td>Cherry (including sour)</td></tr>
<tr><td>2.1.3.3</td><td>Peach</td></tr>
<tr><td>2.1.3.4</td><td>Plum and prune</td></tr>
<tr><td>2.1.3.5</td><td>Others n.e.s. (for example, nectarine)</td></tr>
<tr><td>2.1.4</td><td>Grapes</td></tr>
<tr><td>2.1.4.1</td><td>Grapes for wine</td></tr>
<tr><td>2.1.4.2</td><td>Grapes for table use</td></tr>
<tr><td>2.1.4.3</td><td>Grapes for raisins</td></tr>
<tr><td>2.1.5</td><td>Small cultivated fruit</td></tr>
<tr><td>2.1.5.1</td><td>Blueberry</td></tr>
<tr><td>2.1.5.2</td><td>Cranberry</td></tr>
<tr><td>2.1.5.3</td><td>Currants</td></tr>
<tr><td>2.1.5.4</td><td>Gooseberry</td></tr>
<tr><td>2.1.5.5</td><td>Raspberry</td></tr>
<tr><td>2.1.5.6</td><td>Strawberry</td></tr>
<tr><td>2.1.5.7</td><td>Others n.e.s. (for example, blackberry)</td></tr>
<tr><td>2.1.6</td><td>Other cultivated fruit</td></tr>
<tr><td>2.1.6.0.1</td><td>Avocado</td></tr>
<tr><td>2.1.6.0.2</td><td>Banana</td></tr>
<tr><td>2.1.6.0.3</td><td>Breadfruit</td></tr>
<tr><td>2.1.6.0.4</td><td>Custard apple</td></tr>
<tr><td>2.1.6.0.5</td><td>Date</td></tr>
<tr><td>2.1.6.0.6</td><td>Fig</td></tr>
<tr><td>2.1.6.0.7</td><td>Guava</td></tr>
<tr><td>2.1.6.0.8</td><td>Mango</td></tr>
<tr><td>2.1.6.0.9</td><td>Papaya</td></tr>
<tr><td>2.1.6.1.0</td><td>Persimmon</td></tr>
<tr><td>2.1.6.1.1</td><td>Pineapple</td></tr>
<tr><td>2.1.6.1.2</td><td>Plantain</td></tr>
<tr><td>2.1.6.1.3</td><td>Pomegranate</td></tr>
<tr><td>2.1.6.1.4</td><td>Sapodilla</td></tr>
<tr><td>2.1.6.1.5</td><td>Other n.e.s. (for example, lychee, carob)</td></tr>
<tr><td>2.1.7</td><td>Edible nuts</td></tr>
<tr><td>2.1.7.1</td><td>Almond</td></tr>
<tr><td>2.1.7.2</td><td>Cashew</td></tr>
<tr><td>2.1.7.3</td><td>Walnut</td></tr>
<tr><td>2.1.7.4</td><td>Chestnut</td></tr>
<tr><td>2.1.7.5</td><td>Hazelnut (filbert)</td></tr>
<tr><td>2.1.7.6</td><td>Other n.e.s. (for example, pecan, pistachio, Brazil, Macadamia (Queensland) but excluding coconut)</td></tr>
<tr style="font-weight: bold"><td>2.2</td><td>Permanent crops mainly for industrial purposes</td></tr>
<tr><td>2.2.1</td><td>Beverage crops</td></tr>
<tr><td>2.2.1.1</td><td>Coffee</td></tr>
<tr><td>2.2.1.2</td><td>Cocoa (cacao)</td></tr>
<tr><td>2.2.1.3</td><td>Tea</td></tr>
<tr><td>2.2.1.4</td><td>Hops</td></tr>
<tr><td>2.2.1.5</td><td>Yerba mate</td></tr>
<tr><td>2.2.1.6</td><td>Others n.e.s. (for example, cola)</td></tr>
<tr><td>2.2.2</td><td>Oil crops</td></tr>
<tr><td>2.2.2.1</td><td>Coconut</td></tr>
<tr><td>2.2.2.2</td><td>Oil palm</td></tr>
<tr><td>2.2.2.3</td><td>Olive</td></tr>
<tr><td>2.2.2.4</td><td>Others n.e.s. (for example, tung tree, shea butter tree)</td></tr>
<tr><td>2.2.3</td><td>Spices and aromatic crops</td></tr>
<tr><td>2.2.3.1</td><td>Black pepper</td></tr>
<tr><td>2.2.3.2</td><td>Cinnamon</td></tr>
<tr><td>2.2.3.3</td><td>Clove</td></tr>
<tr><td>2.2.3.4</td><td>Ginger</td></tr>
<tr><td>2.2.3.5</td><td>Nutmeg and spice</td></tr>
<tr><td>2.2.3.6</td><td>Vanilla</td></tr>
<tr><td>2.2.3.7</td><td>Cardamon</td></tr>
<tr><td>2.2.3.8</td><td>Others n.e.s. (for example, drumstick)</td></tr>
<tr><td>2.2.4</td><td>Fibre crops</td></tr>
<tr><td>2.2.4.1</td><td>Abaca (Manila hemp)</td></tr>
<tr><td>2.2.4.2</td><td>Agave plants (for example, drumstick)</td></tr>
<tr><td>2.2.4.3</td><td>Kapok</td></tr>
<tr><td>2.2.4.4</td><td>New Zealand flax (formio)</td></tr>
<tr><td>2.2.4.5</td><td>Ramie and rhea</td></tr>
<tr><td>2.2.4.6</td><td>Others n.e.s. (for example, fique, maguey)</td></tr>
<tr><td>2.2.5</td><td>Rubber and tanning crops</td></tr>
<tr><td>2.2.5.1</td><td>Rubber (hevea)</td></tr>
<tr><td>2.2.5.2</td><td>Black wattle</td></tr>
<tr><td>2.2.5.3</td><td>Quebracho</td></tr>
<tr><td>2.2.5.4</td><td>Others n.e.s.</td></tr>
<tr><td>2.2.6</td><td>Flower crops</td></tr>
<tr><td>2.2.6.1</td><td>Roses</td></tr>
<tr><td>2.2.6.2</td><td>Jasmine</td></tr>
<tr><td>2.2.6.3</td><td>Others n.e.s.</td></tr>
<tr><td>2.2.7</td><td>Other industrial crops</td></tr>
<tr><td>2.2.7.1</td><td>Citronella</td></tr>
<tr><td>2.2.7.2</td><td>Mulberry for silkworms</td></tr>
<tr><td>2.2.7.3</td><td>Sago palm</td></tr>
<tr><td>2.2.7.4</td><td>Palmyra plam</td></tr>
<tr><td>2.2.7.5</td><td>Quinine</td></tr>
<tr><td>2.2.7.6</td><td>Areca (betel) nut</td></tr>
<tr><td>2.2.7.7</td><td>Others n.e.s. (for example, lemon grass)</td></tr>
<tr style="font-weight: bold"><td>2.3</td><td>Other permanent crops n.e.s.</td></tr>
</table>

</body>
</html>